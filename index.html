<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Xtst by vetroff</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
  </head>
  <body>

<div class="wrapper">


ncdu  - размер папок



dpkg-reconfigure arno-iptables-firewall

==========================
==========================

      выбор зеркала

==========================
==========================



apt-get install -y apt-spy

apt-spy -d stable -a north-america

apt-spy -d stable -a europe

apt-spy -d stable -s de



nano /etc/apt/sources.list.d/apt-spy.list
nano /etc/apt/sources.list

здесь находятся новые зеркала после  теста

/etc/apt/sources.list.d/apt-spy.list

squezze

deb http://mirror.yandex.ru/debian/ stable main contrib non-free
deb-src http://mirror.yandex.ru/debian/ stable main contrib non-free


приоритет  пакетов

nano /etc/apt/preferences

Package: *
Pin: release a=stable
Pin-Priority: 700

Package: *
Pin: release a=testing
Pin-Priority: 650



deb ftp://ftp.ch.debian.org/debian/ stable main #contrib non-free
deb-src ftp://ftp.ch.debian.org/debian/ stable main #contrib non-free
deb http://security.debian.org/ stable/updates main

deb ftp://ftp.ch.debian.org/debian/ stable main contrib non-free
deb-src ftp://ftp.ch.debian.org/debian/ stable main contrib non-free



===============================

выбор нестабильного дистрибутива

===============================

при установке пакетов из тестируемого / нестабильного дистрибутива, просто используйте ключ -t:


apt-get -t testing install
apt-get -t unstable install

==============================



===================================

  "заморозка"  обновлений пакета

===================================

echo "mc hold" | dpkg --set-selections
dpkg --get-selections | grep mc

------------------------------------



invoke-rc.d arno-iptables-firewall start

-------------------------------------

dd of=test bs=64k count=16k conv=fdatasync

cat /proc/cpuinfo

netstat -lnp

apt-get install -y sysvconfig /Lenny/

-------------------

   add pubkey

apt-key adv --keyserver pgp.mit.edu --recv-key  <you key>


----------------
 поиск  файла
----------------

find / -iname 'mc*' -print 2> /dev/null

----------------

====================

   ssh server

====================

nano /etc/ssh/sshd_config

UseDNS no


В файлах

/etc/pam.d/login
и
/etc/pam.d/sshd

выпиливаем начисто строчки «session optional pam_motd.so»
===================

apache2-utils



===================
 
 тест  вебсервера

===================

ab -n 10000 -c 20 http://domain.com/

Тест в 500 запросов, с организацией 20 одновременных соединений.



ab -kc 200 -t 10000 http://host/



================

поиск  файлов  в  пакетах


================

apt-file update




===================



wget -O /dev/null 






--------------------
время
dpkg-reconfigure tzdata

руссификация KDE
apt-cache search i18n | grep ru
--------------------
руссификация  iceweasel
apt-get install iceweasel-l10n-ru
--------------------
webmin
=============


информация о процессоре

cat /proc/cpuinfo


информация о файловой системе

df -i
df

df -h свободное место



тест файловой системы
dd if=/dev/zero of=test bs=64k count=16k conv=fdatasync
===================
генерация  локалей
===================
Debian 6

locale-gen en_US.UTF-8
locale-gen ru_RU.UTF-8

-------------------
lsmod

список  всех  модулей ядра

------------------
проверка  занятого  места

du -sh /
du -h
-------------------------


apt-get install -y apt-show-versions libapt-pkg-perl libio-pty-perl libnet-ssleay-perl openssl libauthen-pam-perl file libexpat1 libmagic1 mime-support python python-minimal python2.6 python2.6-minimal

wget http://prdownloads.sourceforge.net/webadmin/webmin_1.590_all.deb

dpkg -i webmin_1.590_all.deb

--------------------

добавить ключ
gpg --keyserver wwwkeys.eu.pgp.net --recv-keys DCF9F87B6DFBCBAE
gpg --armor --export DCF9F87B6DFBCBAE | apt-key add -
apt-get update

gpg --export | apt-key add -

или

apt-key adv --keyserver pgp.mit.edu --recv-key  [you key]
-----------------------

========================
 
    Установка RAR 

========================

nano /etc/apt/sources.list


добавить:


deb http://ftp.nl.debian.org/debian/ unstable main contrib non-free

apt-get  update

apt-get install rar unrar


----------------------

icq qutim
wget -O - http://qutim.org/debian/archive.key | sudo apt-key add -
apt-get install qutim qutim-languages qutim-plugin-plugman qutim-plugin-histman
-----------------------
apt-cache search linux-headers
apt-cache search linux-image
-----------------------
репозитории
stable
------
deb http://mirror.peer1.net/debian/ stable main #contrib non-free
deb-src http://mirror.peer1.net/debian/ stable main #contrib non-free
deb http://security.debian.org/ stable/updates main

backports
-------
#deb http://mirror.peer1.net/debian/ backports main #contrib non-free
#deb-src http://mirror.peer1.net/debian/ backports main #contrib non-free
kde
-------
deb http://www.debian-multimedia.org/ testing main
-----------------------
Установка пакета из Debian backports с указанием ветки
apt-get -t lenny-backports install “package”
-----------------------
сетевые интерфейсы
ifconfig
-----------------------


rar-архивы
rar a -m0 -v419430400b <имя архива.rar> <имя файла.расширение>
-v - размер, -m0 - степень сжатия

-----------------------
установка десктопа

apt-get install x-window-system
	---//---    kdm kde4-minimal 
------------------------
установка KDE
apt-get install kde-core kdm kde-i18n-ru

установка KDE4

deb http://www.debian-desktop.org/pub/linux/debian/kde43 lenny-backports main contrib non-free
deb-src http://www.debian-desktop.org/pub/linux/debian/kde43 lenny-backports main contrib non-free 
--------------
пакет uswsusp пересобрать ядро с вкл.параметром
'CONFIG_SOFTWARE_SUSPEND=y'
-----------------------

http://www.debianhelp.co.uk/freenx.htm
http://wiki.etersoft.ru/RX
http://www.linux16.net/node/549

ftp://updates.etersoft.ru/pub/Etersoft/RX@Etersoft/stable/Debian/5.0/

i386
-----
wget ftp://updates.etersoft.ru/pub/Etersoft/RX@Etersoft/stable/Debian/5.0/freenx-server_0.7.4-eter22debian_i386.deb
wget ftp://updates.etersoft.ru/pub/Etersoft/RX@Etersoft/stable/Debian/5.0/nx_3.4.0-eter8debian_i386.deb

i86_64
-----
wget ftp://updates.etersoft.ru/pub/Etersoft/RX@Etersoft/stable/x86_64/Debian/5.0/freenx-server_0.7.4-alt22debian_amd64.deb
wget ftp://updates.etersoft.ru/pub/Etersoft/RX@Etersoft/stable/x86_64/Debian/5.0/nx_3.4.0-alt8debian_amd64.deb

http://updates.etersoft.ru/pub/Etersoft/RX@Etersoft/unstable/Debian/5.0/

nxsetup --setup-nomachine-key --install




/etc/nxserver/node.conf
ENABLE_KDE_CUPS="1"
SSHD_PORT=77
ENABLE_PASSDB_AUTHENTICATION="1"
ENABLE_USER_DB="1" ???

/etc/ssh/sshd.conf
AllowUsers root nx vis@127.0.0.1
добавить пользователя в группу nx

chmod 777 /tmp  !!!!!!!!!!!!!!!!!

passwd -u nx
nxserver --help
nxserver --adduser vis
nxserver --passwd vis

/etc/init.d/freenx-server restart

---------------------------
original nomachine

repositorium:
deb http://kanotix.com/files/debian/ unstable main non-free


/usr/NX/bin/nxserver --restart


nxsetup --install --setup-nomachine-key --clean 

------------------------

Medina You I free (Wolf hard remix)
------------------------
настройка  сети Qemu

mkdir /dev/net
mknod /dev/net/tun c 10 200

#Создаем виртуальную сетевую карту, указываем владельца
tunctl -t tap0 -u User
#Поднимаем tap1 с нулевым IP
ifconfig tap0 0.0.0.0 up
#Создаем мост br0
brctl addbr br0
#Соединяем tap1, eth0 и br0
brctl addif br0 eth0 tap0
#Поднимаем мост
ip link set up dev br0
#Получаем адрес от DHCP для моста
dhclient br0
#Поднимаем мост
ifconfig br0 up
#удаляем адрес из eth0
ifconfig eth0 0.0.0.0 up

gpasswd -a USER uml-net
-----------------------
        MYSQL
----------------------
mysql -u root -p - вход с пользователем и паролем

mod_mysql_vhost       !!!!!!!!



GRANT ALL PRIVILEGES ON linotes.* TO 'linotes'@'localhost' IDENTIFIED BY '789/*-' WITH GRANT OPTION;
FLUSH PRIVILEGES;

-----------------------
auto eth0
iface eth0 inet manual

-----------------------
работает на OpenVZ VPS
---------
auto vnc0
iface vnc0 inet static
    address 192.168.0.1
    netmask 255.255.255.0
    vde2-switch -t vnc
---------
SSH
ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key
ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key
не вводить  пароль
---------
virtualbox
apt-get install libqt4-network libqt4-opengl libqtcore4 libqtgui4 libsdl1.2debian
apt-get install linux-headers-<version>      version uname -r

/etc/init.d/vboxdrv setup
---------------------------
сборка ядра

CONCURRENCY_LEVEL=4 make-kpkg --initrd --revision=1.2 --append-to-version=-vis-0.7 kernel-image kernel-headers
CONCURRENCY_LEVEL=4 make-kpkg --initrd --revision=1.2 --append-to-version=-vis-0.1 kernel-headers
4-количество ядер
The UTS Release version in include/linux/version.h  does not match current version

ftp://ftp.kernel.org/pub/linux/kernel/v2.6/

configfile /boot/grub/menu.lst

mkinitrd -c -k 2.6.35.2-vis-0.7 -m ext3:jbd --fstab=/etc/fstab -f ext3 -r /dev/sda1

update-initramfs

ln -s /usr/src/linux-headers-2.6.26-2-xen-686 /lib/modules/`uname -r`/source

linux-headers-2.6.26-2-common
-----------------------------
Настройка сети QEMU

apt-get install uml-utilities bridge-utils

modprobe kqemu
FATAL: Module kqemu not found. 
решение
apt-get install module-assistant
m-a a-i kqemu

m-a install kqemu-source

-net nic

tunctl -u 'vis' -t vnc0

добавляем в /etc/network/interfaces
auto vnc0
iface vnc0 inet static
address 192.168.0.7
netmask 255.255.255.0

brctl addbr br0

добавляем в /etc/network/interfaces

auto br0
iface br0 inet static
bridge_ports vnc0
address 192.168.0.101
netmask 255.255.255.0
gateway 192.168.0.1
network 192.168.0.1
broadcast 192.168.0.255


ifconfig br0 up/down - вкл/выкл устройство



Первый раз нам нужно загрузиться с образа системы и с поддержкой vnc для подключения до установки системы:

qemu -m 512 -hda /mnt/vps/vps1.img -localtime -daemonize -net nic,model=rtl8139 -net tap,ifname=tap0 -cdrom /home/user/os.iso -bood d -vnc :1

В дальнейшем строку загрузки можно будет сократить до

qemu -m 512 -hda /mnt/vps/vps1.img -localtime -daemonize -net nic,model=rtl8139 -net tap,ifname=tap0

mac=$(echo -n EE:AE:B0:BF; for i in `seq 1 2`; do echo -n `echo ":$RANDOM$RANDOM" | cut -n -c -3`; done)
qemu $OPTIONS -net nic,vlan=0,macaddr=$mac,model=rtl8139 -net tap,vlan=0,ifname=$ic,script=no


Первой строчкой мы генерируем mac-адрес для виртуального интерфейса в виртуальной системе. Вторая строчка - непосредственно запуск qemu. Замените $OPTIONS на другие, нужные вам, опции (к примеру, у меня: OPTIONS='-boot d -cdrom install-x86-minimal-2007.0.iso' - загрузится с cd-образа Gentoo, воспринимая его как полноценный cd-диск).


-net nic,model=rtl8139 -net tap,ifname=tap0

qemu -net nic,model=rtl8139  -net tap,ifname=tap0 -net socket,mcast=178.18.17.154:3389 -m 768 -smp 2 /home/vis/MyMachines/ws03/ws03.img

http://184.82.40.118/files/radm_server.exe

показывает открытые сокеты
socklist | grep qemu

-net socket,listen=:1234
qemu -net nic,model=rtl8139  -net tap,ifname=tap0 -net socket,listen=178.18.17.154:3389 -net socket,listen=178.18.17.154:4899 -m 768 -smp 2 /home/vis/MyMachines/ws03/ws03.img

=======================
       ядро
=======================
apt-get install linux-modules-2.6.26-2-xen-amd64

=======================

=======================
   точное время
=======================
ntpdate
http://packages.debian.org/lenny/ntpdate
http://support.ntp.org/bin/view/Servers/StratumTwoTimeServers
http://www.pool.ntp.org/ru/
=======================

=======================
         Test
=======================
apt-get install libx11-dev libgl1-mesa-dev libxext-dev perl  perl-modules make

wget http://byte-unixbench.googlecode.com/files/unixbench-5.1.2.tar.gz
wget http://184.82.40.118/files/unixbench-5.1.2.tar.gz


gunzip -dvc unixbench-5.1.2.tar.gz | tar xvf -
tar xvf unixbench-5.1.2.tar.gz
cd unixbench-5.1.2
make
./Run
--------------------
для Centos
yum -y install gcc automake autoconf libtool make
yum install libXext-devel
--------------------
- without hdd tests
./Run dhry2reg whetstone-double syscall pipe context1 spawn execl shell1 shell8 shell16  
--------------------

If you encounter Error: Please install /usr/bin/time. Error :  apt-get install time
to disable graphical tests modify maketest file GRAPHIC_TESTS = defined
+++++++++++++++++++
Re-Package Tarball:
 - # tar --create --file unixbench-5.1.2.tar unixbench-5.1.2
 - # gzip unixbench-5.1.2.tar
+++++++++++++++++++
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
